# VK parser

## Как работает

Парсинг групп

- берет из коллекции subjects названия тем для поиска
- ищет по этим темам 1000 групп
- добавляет к каждой группе поле subject
- сохраняет группы в коллекцию groups

Парсинг постов

- берет из коллекции subjects названия тем для поиска
- берет из коллекции groups 100 групп, у которых:

1. количество юзеров не менее 100000
2. последняя дата парсинга менее 6 часов назад
3. группа не закрыта

- берет 100 последних постов на стене
- добавляет к каждому посту:

1. поле subject
2. поле member_counts от группы
3. поле popularity = likes/view

- добавляет к группе дату парсинга
- сохраняет посты в коллекцию posts

Парсинг комментов

- берет из коллекции subjects названия тем для поиска
- берет из коллекции posts все посты, у которых:

1. дата создания не позднее двух дней назад
2. количество юзеров не менее 100000
3. группа не закрыта

- добавляет к каждому комменту:

1. поле subject
2. поле popularity = likes/ post.view

- добавляет к каждому посту дату парсинга
- сохраняет комменты в коллекцию comments
